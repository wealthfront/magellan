apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: "org.jetbrains.kotlin.kapt"

android {
  compileSdk Versions.compileSdkVersion
  buildToolsVersion = Versions.buildToolsVersion

  defaultConfig {
    applicationId "com.wealthfront.magellan.sample"
    minSdkVersion Versions.minSdkVersion
    targetSdkVersion Versions.targetSdkVersion
    versionCode 1
    versionName "1.0"
    testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
  }

  compileOptions {
    setSourceCompatibility(JavaVersion.VERSION_1_8)
    setTargetCompatibility(JavaVersion.VERSION_1_8)
  }

  buildFeatures {
    viewBinding true
    compose true
  }

  composeOptions {
    kotlinCompilerExtensionVersion Versions.composeVersion
  }

  lintOptions {
    disable 'UnusedResources'
    disable 'IconLocation'
  }

  buildTypes {
    release {
      minifyEnabled false
    }
  }
}

tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).configureEach {
  kotlinOptions {
    jvmTarget = "1.8"
    useIR = true
  }
}

dependencies {
  implementation project(':magellan-library')
  implementation project(':magellan-legacy')
  implementation project(':magellan-compose')

  implementation Dependencies.appCompat
  implementation Dependencies.kotlinStdLib
  implementation Dependencies.kotlinReflect
  implementation Dependencies.material
  implementation Dependencies.composeUi
  implementation Dependencies.composeUiUtil
  implementation Dependencies.composeFoundation
  implementation Dependencies.composeFoundationLayout
  implementation Dependencies.composeMaterial
  implementation Dependencies.composeUiTooling

  implementation Dependencies.dagger
  kapt Dependencies.daggerCompiler

  testImplementation Dependencies.junit

  androidTestImplementation Dependencies.testRunner
  androidTestImplementation Dependencies.testRules
  androidTestImplementation Dependencies.uiAutomator
  androidTestImplementation Dependencies.extJunit
  androidTestImplementation Dependencies.espressoCore

  lintChecks project(':magellan-lint')
}
